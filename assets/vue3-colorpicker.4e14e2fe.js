import{a3 as j,k as I,r as T,aX as oe,c as O,ae as ye,az as Ge,a8 as Te,ax as f,V as w,W as i,A as M,C as E,I as x,aD as ne,U as H,aF as P,Q as K,a1 as Z,b2 as me,bm as Se,D as $e,aE as Fe,b0 as ke,aH as we,aj as He,T as qe,aA as U,ay as Q}from"./@vue.e02a3834.js";import{z as C}from"./vue-types.259d37f6.js";import{t as R}from"./tinycolor2.2a68e31c.js";import{t as Y,w as W,u as ae,o as Xe,a as re}from"./@vueuse.78025d22.js";import{V as J}from"./@aesoper.bcc1bd53.js";import{A as Ze}from"./vue3-angle.40cfb814.js";import{p as Ue,s as Qe}from"./gradient-parser.bfc57262.js";import{m as ee}from"./lodash-es.6ea7eef5.js";import{c as Ye}from"./@popperjs.4edf5fad.js";var Je=Object.defineProperty,xe=Object.defineProperties,et=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,se=(e,o,t)=>o in e?Je(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,le=(e,o)=>{for(var t in o||(o={}))tt.call(o,t)&&se(e,t,o[t]);if(Be)for(var t of Be(o))ot.call(o,t)&&se(e,t,o[t]);return e},ie=(e,o)=>xe(e,et(o)),L=(e,o,t)=>(se(e,typeof o!="symbol"?o+"":o,t),t);const V=e=>Math.round(e*100)/100;class B{constructor(o){L(this,"instance"),L(this,"alphaValue",0),L(this,"redValue",0),L(this,"greenValue",0),L(this,"blueValue",0),L(this,"hueValue",0),L(this,"saturationValue",0),L(this,"brightnessValue",0),L(this,"hslSaturationValue",0),L(this,"lightnessValue",0),L(this,"initAlpha",()=>{const t=this.instance.getAlpha();this.alphaValue=Math.min(1,t)*100}),L(this,"initLightness",()=>{const{s:t,l:n}=this.instance.toHsl();this.hslSaturationValue=V(t),this.lightnessValue=V(n)}),L(this,"initRgb",()=>{const{r:t,g:n,b:l}=this.instance.toRgb();this.redValue=V(t),this.greenValue=V(n),this.blueValue=V(l)}),L(this,"initHsb",()=>{const{h:t,s:n,v:l}=this.instance.toHsv();this.hueValue=Math.min(360,Math.ceil(t)),this.saturationValue=V(n),this.brightnessValue=V(l)}),L(this,"toHexString",()=>this.instance.toHexString()),L(this,"toRgbString",()=>this.instance.toRgbString()),this.instance=R(o),this.initRgb(),this.initHsb(),this.initLightness(),this.initAlpha()}toString(o){return this.instance.toString(o)}get hex(){return this.instance.toHex()}set hex(o){this.instance=R(o),this.initHsb(),this.initRgb(),this.initAlpha(),this.initLightness()}set hue(o){this.saturation===0&&this.brightness===0&&(this.saturationValue=1,this.brightnessValue=1),this.instance=R({h:V(o),s:this.saturation,v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.hueValue=V(o)}get hue(){return this.hueValue}set saturation(o){this.instance=R({h:this.hue,s:V(o),v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.saturationValue=V(o)}get saturation(){return this.saturationValue}set brightness(o){this.instance=R({h:this.hue,s:this.saturation,v:V(o),a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.brightnessValue=V(o)}get brightness(){return this.brightnessValue}set lightness(o){this.instance=R({h:this.hue,s:this.hslSaturationValue,l:V(o),a:this.alphaValue/100}),this.initRgb(),this.initHsb(),this.lightnessValue=V(o)}get lightness(){return this.lightnessValue}set red(o){const t=this.instance.toRgb();this.instance=R(ie(le({},t),{r:V(o),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.redValue=V(o)}get red(){return this.redValue}set green(o){const t=this.instance.toRgb();this.instance=R(ie(le({},t),{g:V(o),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.greenValue=V(o)}get green(){return this.greenValue}set blue(o){const t=this.instance.toRgb();this.instance=R(ie(le({},t),{b:V(o),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.blueValue=V(o)}get blue(){return this.blueValue}set alpha(o){this.instance.setAlpha(o/100),this.alphaValue=o}get alpha(){return this.alphaValue}get RGB(){return[this.red,this.green,this.blue,this.alpha/100]}get HSB(){return[this.hue,this.saturation,this.brightness,this.alpha/100]}get HSL(){return[this.hue,this.hslSaturationValue,this.lightness,this.alpha/100]}}function Ae(e,o,t,n){return`rgba(${[e,o,t,n/100].join(",")})`}const ce=(e,o,t)=>o<t?e<o?o:e>t?t:e:e<t?t:e>o?o:e,ue="color-history",de=8;var G=(e,o)=>{for(const[t,n]of o)e[t]=n;return e};const nt=j({name:"Alpha",props:{color:C.instanceOf(B),size:C.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:o}){const t=I(null),n=I(null);let l=e.color||new B;const a=T({red:l.red,green:l.green,blue:l.blue,alpha:l.alpha});oe(()=>e.color,s=>{s&&(l=s,ee(a,{red:s.red,green:s.green,blue:s.blue,alpha:s.alpha}))},{deep:!0});const c=O(()=>{const s=Ae(a.red,a.green,a.blue,0),y=Ae(a.red,a.green,a.blue,100);return{background:`linear-gradient(to right, ${s} , ${y})`}}),r=()=>{if(t.value&&n.value){const s=a.alpha/100,y=t.value.getBoundingClientRect(),m=n.value.offsetWidth;return Math.round(s*(y.width-m)+m/2)}return 0},u=O(()=>({left:r()+"px",top:0})),_=s=>{s.target!==t.value&&g(s)},g=s=>{if(s.stopPropagation(),t.value&&n.value){const y=t.value.getBoundingClientRect(),m=n.value.offsetWidth;let p=s.clientX-y.left;p=Math.max(m/2,p),p=Math.min(p,y.width-m/2);const h=Math.round((p-m/2)/(y.width-m)*100);l.alpha=h,a.alpha=h,o("change",h)}};return Y(()=>{const s={drag:y=>{g(y)},end:y=>{g(y)}};t.value&&n.value&&J.triggerDragEvent(t.value,s)}),{barElement:t,cursorElement:n,getCursorStyle:u,getBackgroundStyle:c,onClickSider:_}}}),at=e=>(U("data-v-18925ba6"),e=e(),Q(),e),rt=at(()=>i("div",{class:"vc-alpha-slider__bar-handle"},null,-1)),st=[rt];function lt(e,o,t,n,l,a){return f(),w("div",{class:M(["vc-alpha-slider","transparent",{"small-slider":e.size==="small"}])},[i("div",{ref:"barElement",class:"vc-alpha-slider__bar",style:E(e.getBackgroundStyle),onClick:o[0]||(o[0]=(...c)=>e.onClickSider&&e.onClickSider(...c))},[i("div",{class:M(["vc-alpha-slider__bar-pointer",{"small-bar":e.size==="small"}]),ref:"cursorElement",style:E(e.getCursorStyle)},st,6)],4)],2)}var he=G(nt,[["render",lt],["__scopeId","data-v-18925ba6"]]);const it=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]],ct=j({name:"Palette",emits:["change"],setup(e,{emit:o}){return{palettes:it,computedBgStyle:l=>l==="transparent"?l:l==="advance"?{}:{background:R(l).toRgbString()},onColorChange:l=>{o("change",l)}}}}),ut={class:"vc-compact"},dt=["onClick"];function ht(e,o,t,n,l,a){return f(),w("div",ut,[(f(!0),w(x,null,ne(e.palettes,(c,r)=>(f(),w("div",{key:r,class:"vc-compact__row"},[(f(!0),w(x,null,ne(c,(u,_)=>(f(),w("div",{key:_,class:"vc-compact__color-cube--wrap",onClick:g=>e.onColorChange(u)},[i("div",{class:M(["vc-compact__color_cube",{advance:u==="advance",transparent:u==="transparent"}]),style:E(e.computedBgStyle(u))},null,6)],8,dt))),128))]))),128))])}var Pe=G(ct,[["render",ht],["__scopeId","data-v-b969fd48"]]);const gt=j({name:"Board",props:{color:C.instanceOf(B),round:C.bool.def(!1),hide:C.bool.def(!0)},emits:["change"],setup(e,{emit:o}){var t,n,l;const a=Te(),c={h:((t=e.color)==null?void 0:t.hue)||0,s:1,v:1},r=new B(c).toHexString(),u=T({hueColor:r,saturation:((n=e.color)==null?void 0:n.saturation)||0,brightness:((l=e.color)==null?void 0:l.brightness)||0}),_=I(0),g=I(0),s=I(),y=I(),m=O(()=>({top:_.value+"px",left:g.value+"px"})),p=()=>{if(a){const b=a.vnode.el;g.value=u.saturation*(b==null?void 0:b.clientWidth),_.value=(1-u.brightness)*(b==null?void 0:b.clientHeight)}},h=b=>{b.target!==y.value&&S(b)},S=b=>{if(a){const D=a.vnode.el,F=D==null?void 0:D.getBoundingClientRect();let q=b.clientX-F.left,N=b.clientY-F.top;q=ce(q,0,F.width),N=ce(N,0,F.height);const X=q/F.width,z=ce(-(N/F.height)+1,0,1);g.value=q,_.value=N,u.saturation=X,u.brightness=z,o("change",X,z)}};return Y(()=>{a&&a.vnode.el&&s.value&&(J.triggerDragEvent(s.value,{drag:b=>{S(b)},end:b=>{S(b)}}),p())}),W(()=>e.color,b=>{ee(u,{hueColor:new B({h:b.hue,s:1,v:1}).toHexString(),saturation:b.saturation,brightness:b.brightness}),p()},{deep:!0}),{state:u,cursorElement:s,getCursorStyle:m,onClickBoard:h}}}),ge=e=>(U("data-v-63803390"),e=e(),Q(),e),pt=ge(()=>i("div",{class:"vc-saturation__white"},null,-1)),vt=ge(()=>i("div",{class:"vc-saturation__black"},null,-1)),ft=ge(()=>i("div",null,null,-1)),Ct=[ft];function bt(e,o,t,n,l,a){return f(),w("div",{ref:"boardElement",class:M(["vc-saturation",{"vc-saturation__chrome":e.round,"vc-saturation__hidden":e.hide}]),style:E({backgroundColor:e.state.hueColor}),onClick:o[0]||(o[0]=(...c)=>e.onClickBoard&&e.onClickBoard(...c))},[pt,vt,i("div",{class:"vc-saturation__cursor",ref:"cursorElement",style:E(e.getCursorStyle)},Ct,4)],6)}var pe=G(gt,[["render",bt],["__scopeId","data-v-63803390"]]);const _t=j({name:"Hue",props:{color:C.instanceOf(B),size:C.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:o}){const t=I(null),n=I(null);let l=e.color||new B;const a=T({hue:l.hue||0});oe(()=>e.color,g=>{g&&(l=g,ee(a,{hue:l.hue}))},{deep:!0});const c=()=>{if(t.value&&n.value){const g=t.value.getBoundingClientRect(),s=n.value.offsetWidth;return a.hue===360?g.width-s/2:a.hue%360*(g.width-s)/360+s/2}return 0},r=O(()=>({left:c()+"px",top:0})),u=g=>{g.target!==t.value&&_(g)},_=g=>{if(g.stopPropagation(),t.value&&n.value){const s=t.value.getBoundingClientRect(),y=n.value.offsetWidth;let m=g.clientX-s.left;m=Math.min(m,s.width-y/2),m=Math.max(y/2,m);const p=Math.round((m-y/2)/(s.width-y)*360);l.hue=p,a.hue=p,o("change",p)}};return Y(()=>{const g={drag:s=>{_(s)},end:s=>{_(s)}};t.value&&n.value&&J.triggerDragEvent(t.value,g)}),{barElement:t,cursorElement:n,getCursorStyle:r,onClickSider:u}}}),yt=e=>(U("data-v-5c4cae5b"),e=e(),Q(),e),mt=yt(()=>i("div",{class:"vc-hue-slider__bar-handle"},null,-1)),St=[mt];function $t(e,o,t,n,l,a){return f(),w("div",{class:M(["vc-hue-slider",{"small-slider":e.size==="small"}])},[i("div",{ref:"barElement",class:"vc-hue-slider__bar",onClick:o[0]||(o[0]=(...c)=>e.onClickSider&&e.onClickSider(...c))},[i("div",{class:M(["vc-hue-slider__bar-pointer",{"small-bar":e.size==="small"}]),ref:"cursorElement",style:E(e.getCursorStyle)},St,6)],512)],2)}var ve=G(_t,[["render",$t],["__scopeId","data-v-5c4cae5b"]]);const kt=j({name:"Lightness",props:{color:C.instanceOf(B),size:C.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:o}){const t=I(null),n=I(null);let l=e.color||new B;const[a,c,r]=l.HSL,u=T({hue:a,saturation:c,lightness:r});oe(()=>e.color,p=>{if(p){l=p;const[h,S,b]=l.HSL;ee(u,{hue:h,saturation:S,lightness:b})}},{deep:!0});const _=O(()=>{const p=R({h:u.hue,s:u.saturation,l:.8}).toPercentageRgbString(),h=R({h:u.hue,s:u.saturation,l:.6}).toPercentageRgbString(),S=R({h:u.hue,s:u.saturation,l:.4}).toPercentageRgbString(),b=R({h:u.hue,s:u.saturation,l:.2}).toPercentageRgbString();return{background:[`-webkit-linear-gradient(left, rgb(255, 255, 255), ${p}, ${h}, ${S}, ${b}, rgb(0, 0, 0))`,`-moz-linear-gradient(left, rgb(255, 255, 255), ${p}, ${h}, ${S}, ${b}, rgb(0, 0, 0))`,`-ms-linear-gradient(left, rgb(255, 255, 255), ${p}, ${h}, ${S}, ${b}, rgb(0, 0, 0))`]}}),g=()=>{if(t.value&&n.value){const p=u.lightness,h=t.value.getBoundingClientRect(),S=n.value.offsetWidth;return(1-p)*(h.width-S)+S/2}return 0},s=O(()=>({left:g()+"px",top:0})),y=p=>{p.target!==t.value&&m(p)},m=p=>{if(p.stopPropagation(),t.value&&n.value){const h=t.value.getBoundingClientRect(),S=n.value.offsetWidth;let b=p.clientX-h.left;b=Math.max(S/2,b),b=Math.min(b,h.width-S/2);const D=1-(b-S/2)/(h.width-S);l.lightness=D,o("change",D)}};return Y(()=>{const p={drag:h=>{m(h)},end:h=>{m(h)}};t.value&&n.value&&J.triggerDragEvent(t.value,p)}),{barElement:t,cursorElement:n,getCursorStyle:s,getBackgroundStyle:_,onClickSider:y}}}),wt=e=>(U("data-v-6156acb7"),e=e(),Q(),e),Ht=wt(()=>i("div",{class:"vc-lightness-slider__bar-handle"},null,-1)),Bt=[Ht];function At(e,o,t,n,l,a){return f(),w("div",{class:M(["vc-lightness-slider",{"small-slider":e.size==="small"}])},[i("div",{ref:"barElement",class:"vc-lightness-slider__bar",style:E(e.getBackgroundStyle),onClick:o[0]||(o[0]=(...c)=>e.onClickSider&&e.onClickSider(...c))},[i("div",{class:M(["vc-lightness-slider__bar-pointer",{"small-bar":e.size==="small"}]),ref:"cursorElement",style:E(e.getCursorStyle)},Bt,6)],4)],2)}var Re=G(kt,[["render",At],["__scopeId","data-v-6156acb7"]]);const Pt=j({name:"History",props:{colors:C.arrayOf(String).def(()=>[]),round:C.bool.def(!1)},emits:["change"],setup(e,{emit:o}){return{onColorSelect:n=>{o("change",n)}}}}),Rt={key:0,class:"vc-colorPicker__record"},Vt={class:"color-list"},It=["onClick"];function Kt(e,o,t,n,l,a){return e.colors&&e.colors.length>0?(f(),w("div",Rt,[i("div",Vt,[(f(!0),w(x,null,ne(e.colors,(c,r)=>(f(),w("div",{key:r,class:M(["color-item","transparent",{"color-item__round":e.round}]),onClick:u=>e.onColorSelect(c)},[i("div",{class:"color-item__display",style:E({backgroundColor:c})},null,4)],10,It))),128))])])):H("",!0)}var fe=G(Pt,[["render",Kt],["__scopeId","data-v-7e6b67ca"]]);const Et=j({name:"Display",props:{color:C.instanceOf(B),disableAlpha:C.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:o}){var t,n,l;const a=T({color:e.color,previewBgColor:(t=e.color)==null?void 0:t.toRgbString(),alpha:((n=e.color)==null?void 0:n.alpha)||100,hex:(l=e.color)==null?void 0:l.hex}),c=O(()=>({background:a.previewBgColor})),r=_=>{const g=_.target,s=parseInt(g.value.replace("%",""));!isNaN(s)&&a.color&&(a.alpha=s,a.color.alpha=s)},u=_=>{const s=_.target.value.replace("#","");R(s).isValid()&&a.color&&(a.color.hex=s)};return W(()=>e.color,_=>{_&&(a.color=_)},{deep:!0}),W(()=>a.color,()=>{a.color&&(a.previewBgColor=a.color.toRgbString(),a.alpha=a.color.alpha,a.hex=a.color.hex,o("update:color",a.color),o("change",a.color))},{deep:!0}),{state:a,getBgColorStyle:c,onAlphaBlur:r,onInputChange:u}}}),Ot={class:"vc-display"},Wt={class:"vc-current-color vc-transparent"},Lt={class:"vc-color-input"},Dt=["value"],Mt={key:0,class:"vc-alpha-input"},Nt=["value"];function zt(e,o,t,n,l,a){return f(),w("div",Ot,[i("div",Wt,[i("div",{class:"color-cube",style:E(e.getBgColorStyle)},null,4)]),i("div",Lt,[i("input",{value:e.state.hex,onBlur:o[0]||(o[0]=(...c)=>e.onInputChange&&e.onInputChange(...c))},null,40,Dt)]),e.disableAlpha?H("",!0):(f(),w("div",Mt,[i("input",{class:"vc-alpha-input__inner",value:e.state.alpha+"%",onBlur:o[1]||(o[1]=(...c)=>e.onAlphaBlur&&e.onAlphaBlur(...c))},null,40,Nt)]))])}var Ce=G(Et,[["render",zt],["__scopeId","data-v-0067da1d"]]);const jt=j({name:"FkColorPicker",components:{Display:Ce,Alpha:he,Palette:Pe,Board:pe,Hue:ve,Lightness:Re,History:fe},props:{color:C.instanceOf(B),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),disableAlpha:C.bool.def(!1)},emits:["update:color","change","advanceChange"],setup(e,{emit:o}){const t=e.color||new B,n=T({color:t,hex:t.toHexString(),rgb:t.toRgbString()}),l=I(!1),a=O(()=>({background:n.rgb})),c=()=>{l.value=!1,o("advanceChange",!1)},r=ae(ue,[],{}),u=re(()=>{if(e.disableHistory)return;const h=n.color.toRgbString();if(r.value=r.value.filter(S=>!R.equals(S,h)),!r.value.includes(h)){for(;r.value.length>de;)r.value.pop();r.value.unshift(h)}},500),_=h=>{h==="advance"?(l.value=!0,o("advanceChange",!0)):(n.color.hex=h,o("advanceChange",!1))},g=h=>{n.color.alpha=h},s=h=>{n.color.hue=h},y=(h,S)=>{n.color.saturation=h,n.color.brightness=S},m=h=>{n.color.lightness=h},p=h=>{const b=h.target.value.replace("#","");R(b).isValid()&&(n.color.hex=b)};return W(()=>e.color,h=>{h&&(n.color=h)},{deep:!0}),W(()=>n.color,()=>{n.hex=n.color.hex,n.rgb=n.color.toRgbString(),u(),o("update:color",n.color),o("change",n.color)},{deep:!0}),{state:n,advancePanelShow:l,onBack:c,onCompactChange:_,onAlphaChange:g,onHueChange:s,onBoardChange:y,onLightChange:m,onInputChange:p,previewStyle:a,historyColors:r}}}),Gt=e=>(U("data-v-592a5ec3"),e=e(),Q(),e),Tt={class:"vc-fk-colorPicker"},Ft={class:"vc-fk-colorPicker__inner"},qt={class:"vc-fk-colorPicker__header"},Xt=Gt(()=>i("div",{class:"back"},null,-1)),Zt=[Xt];function Ut(e,o,t,n,l,a){const c=P("Palette"),r=P("Board"),u=P("Hue"),_=P("Lightness"),g=P("Alpha"),s=P("Display"),y=P("History");return f(),w("div",Tt,[i("div",Ft,[i("div",qt,[e.advancePanelShow?(f(),w("span",{key:0,style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...m)=>e.onBack&&e.onBack(...m))},Zt)):H("",!0)]),e.advancePanelShow?H("",!0):(f(),K(c,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(f(),K(r,{key:1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"])):H("",!0),e.advancePanelShow?(f(),K(u,{key:2,color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"])):H("",!0),e.advancePanelShow?H("",!0):(f(),K(_,{key:3,color:e.state.color,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?H("",!0):(f(),K(g,{key:4,color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"])),Z(s,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?H("",!0):(f(),K(y,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}var Ve=G(jt,[["render",Ut],["__scopeId","data-v-592a5ec3"]]);const Qt=j({name:"ChromeColorPicker",components:{Display:Ce,Alpha:he,Board:pe,Hue:ve,History:fe},props:{color:C.instanceOf(B),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),disableAlpha:C.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:o}){const t=e.color||new B,n=T({color:t,hex:t.toHexString(),rgb:t.toRgbString()}),l=O(()=>({background:n.rgb})),a=ae(ue,[],{}),c=re(()=>{if(e.disableHistory)return;const s=n.color.toRgbString();if(a.value=a.value.filter(y=>!R.equals(y,s)),!a.value.includes(s)){for(;a.value.length>de;)a.value.pop();a.value.unshift(s)}},500),r=s=>{n.color.alpha=s},u=s=>{n.color.hue=s},_=(s,y)=>{n.color.saturation=s,n.color.brightness=y},g=s=>{s!=="advance"&&(n.color.hex=s)};return W(()=>e.color,s=>{s&&(n.color=s)},{deep:!0}),W(()=>n.color,()=>{n.hex=n.color.hex,n.rgb=n.color.toRgbString(),c(),o("update:color",n.color),o("change",n.color)},{deep:!0}),{state:n,previewStyle:l,historyColors:a,onAlphaChange:r,onHueChange:u,onBoardChange:_,onCompactChange:g}}}),Yt={class:"vc-chrome-colorPicker"},Jt={class:"vc-chrome-colorPicker-body"},xt={class:"chrome-controls"},eo={class:"chrome-color-wrap transparent"},to={class:"chrome-sliders"};function oo(e,o,t,n,l,a){const c=P("Board"),r=P("Hue"),u=P("Alpha"),_=P("Display"),g=P("History");return f(),w("div",Yt,[Z(c,{round:!0,hide:!1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"]),i("div",Jt,[i("div",xt,[i("div",eo,[i("div",{class:"current-color",style:E(e.previewStyle)},null,4)]),i("div",to,[Z(r,{size:"small",color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"]),e.disableAlpha?H("",!0):(f(),K(u,{key:0,size:"small",color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"]))])]),Z(_,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?H("",!0):(f(),K(g,{key:0,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}var Ie=G(Qt,[["render",oo],["__scopeId","data-v-61d7303b"]]);const be="Vue3ColorPickerProvider",no=j({name:"GradientColorPicker",components:{Angle:Ze,Display:Ce,Alpha:he,Palette:Pe,Board:pe,Hue:ve,Lightness:Re,History:fe},props:{startColor:C.instanceOf(B).isRequired,endColor:C.instanceOf(B).isRequired,startColorStop:C.number.def(0),endColorStop:C.number.def(100),angle:C.number.def(0),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),disableAlpha:C.bool.def(!1)},emits:["update:startColor","update:endColor","update:angle","update:startColorStop","update:endColorStop","startColorChange","endColorChange","advanceChange","angleChange","startColorStopChange","endColorStopChange"],setup(e,{emit:o}){const t=T({startActive:!0,startColor:e.startColor,endColor:e.endColor,startColorStop:e.startColorStop,endColorStop:e.endColorStop,angle:e.angle,startColorRgba:e.startColor.toRgbString(),endColorRgba:e.endColor.toRgbString()}),n=ye(be),l=I(!1),a=I(),c=I(),r=I(),u=O({get:()=>t.startActive?t.startColor:t.endColor,set:d=>{if(t.startActive){t.startColor=d;return}t.endColor=d}}),_=O(()=>{if(r.value&&a.value){const d=t.startColorStop/100,$=r.value.getBoundingClientRect(),k=a.value.offsetWidth;return Math.round(d*($.width-k)+k/2)}return 0}),g=O(()=>{if(r.value&&c.value){const d=t.endColorStop/100,$=r.value.getBoundingClientRect(),k=c.value.offsetWidth;return Math.round(d*($.width-k)+k/2)}return 0}),s=O(()=>({background:`linear-gradient(${t.angle}deg, ${t.startColorRgba} ${t.startColorStop}%, ${t.endColorRgba} ${t.endColorStop}%)`})),y=d=>{var $;if(t.startActive=!0,r.value&&a.value){const k=($=r.value)==null?void 0:$.getBoundingClientRect();let A=d.clientX-k.left;A=Math.max(a.value.offsetWidth/2,A),A=Math.min(A,k.width-a.value.offsetWidth/2),t.startColorStop=Math.round((A-a.value.offsetWidth/2)/(k.width-a.value.offsetWidth)*100),o("update:startColorStop",t.startColorStop),o("startColorStopChange",t.startColorStop)}},m=d=>{var $;if(t.startActive=!1,r.value&&c.value){const k=($=r.value)==null?void 0:$.getBoundingClientRect();let A=d.clientX-k.left;A=Math.max(c.value.offsetWidth/2,A),A=Math.min(A,k.width-c.value.offsetWidth/2),t.endColorStop=Math.round((A-c.value.offsetWidth/2)/(k.width-c.value.offsetWidth)*100),o("update:endColorStop",t.endColorStop),o("endColorStopChange",t.endColorStop)}},p=d=>{const $=d.target,k=parseInt($.value.replace("\xB0",""));isNaN(k)||(t.angle=k%360),o("update:angle",t.angle),o("angleChange",t.angle)},h=d=>{t.angle=d,o("update:angle",t.angle),o("angleChange",t.angle)},S=d=>{d==="advance"?(l.value=!0,o("advanceChange",!0)):(u.value.hex=d,o("advanceChange",!1)),N()},b=d=>{u.value.alpha=d,N()},D=d=>{u.value.hue=d,N()},F=(d,$)=>{u.value.saturation=d,u.value.brightness=$,N()},q=d=>{u.value.lightness=d,N()},N=()=>{t.startActive?(o("update:startColor",t.startColor),o("startColorChange",t.startColor)):(o("update:endColor",t.endColor),o("endColorChange",t.endColor))},X=()=>{l.value=!1,o("advanceChange",!1)},z=ae(ue,[],{}),v=re(()=>{if(e.disableHistory)return;const d=u.value.toRgbString();if(z.value=z.value.filter($=>!R.equals($,d)),!z.value.includes(d)){for(;z.value.length>de;)z.value.pop();z.value.unshift(d)}},500);return Y(()=>{c.value&&a.value&&(J.triggerDragEvent(c.value,{drag:d=>{m(d)},end:d=>{m(d)}}),J.triggerDragEvent(a.value,{drag:d=>{y(d)},end:d=>{y(d)}}))}),W(()=>t.startColor,d=>{t.startColorRgba=d.toRgbString()},{deep:!0}),W(()=>t.endColor,d=>{t.endColorRgba=d.toRgbString()},{deep:!0}),W(()=>u.value,()=>{v()},{deep:!0}),{startGradientRef:a,stopGradientRef:c,colorRangeRef:r,state:t,currentColor:u,getStartColorLeft:_,getEndColorLeft:g,gradientBg:s,advancePanelShow:l,onDegreeBlur:p,onCompactChange:S,onAlphaChange:b,onHueChange:D,onBoardChange:F,onLightChange:q,historyColors:z,onBack:X,onDegreeChange:h,lang:n==null?void 0:n.lang}}}),_e=e=>(U("data-v-f63daa7a"),e=e(),Q(),e),ao={class:"vc-gradient-picker"},ro={class:"vc-gradient-picker__header"},so=_e(()=>i("div",{class:"back"},null,-1)),lo=[so],io={class:"vc-gradient-picker__body"},co={class:"vc-color-range",ref:"colorRangeRef"},uo={class:"vc-color-range__container"},ho={class:"vc-gradient__stop__container"},go=["title"],po=_e(()=>i("span",{class:"vc-gradient__stop--inner"},null,-1)),vo=[po],fo=["title"],Co=_e(()=>i("span",{class:"vc-gradient__stop--inner"},null,-1)),bo=[Co],_o={class:"vc-picker-degree-input vc-degree-input"},yo={class:"vc-degree-input__control"},mo=["value"],So={class:"vc-degree-input__panel"},$o={class:"vc-degree-input__disk"};function ko(e,o,t,n,l,a){const c=P("Angle"),r=P("Palette"),u=P("Board"),_=P("Hue"),g=P("Lightness"),s=P("Alpha"),y=P("Display"),m=P("History");return f(),w("div",ao,[me(i("div",ro,[i("span",{style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...p)=>e.onBack&&e.onBack(...p))},lo)],512),[[Se,e.advancePanelShow]]),i("div",io,[i("div",co,[i("div",uo,[i("div",{class:"vc-background",style:E(e.gradientBg)},null,4),i("div",ho,[i("div",{class:M(["vc-gradient__stop",{"vc-gradient__stop--current":e.state.startActive}]),ref:"startGradientRef",title:e.lang==="ZH-cn"?"\u5F00\u59CB":"Start",style:E({left:e.getStartColorLeft+"px"})},vo,14,go),i("div",{class:M(["vc-gradient__stop",{"vc-gradient__stop--current":!e.state.startActive}]),ref:"stopGradientRef",title:e.lang==="ZH-cn"?"\u7ED3\u675F":"End",style:E({left:e.getEndColorLeft+"px"})},bo,14,fo)])])],512),i("div",_o,[i("div",yo,[i("input",{value:e.state.angle,onBlur:o[1]||(o[1]=(...p)=>e.onDegreeBlur&&e.onDegreeBlur(...p))},null,40,mo)]),i("div",So,[i("div",$o,[Z(c,{angle:e.state.angle,"onUpdate:angle":o[2]||(o[2]=p=>e.state.angle=p),size:40,onChange:e.onDegreeChange},null,8,["angle","onChange"])])])])]),e.advancePanelShow?H("",!0):(f(),K(r,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(f(),K(u,{key:1,color:e.currentColor,onChange:e.onBoardChange},null,8,["color","onChange"])):H("",!0),e.advancePanelShow?(f(),K(_,{key:2,color:e.currentColor,onChange:e.onHueChange},null,8,["color","onChange"])):H("",!0),e.advancePanelShow?H("",!0):(f(),K(g,{key:3,color:e.currentColor,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?H("",!0):(f(),K(s,{key:4,color:e.currentColor,onChange:e.onAlphaChange},null,8,["color","onChange"])),Z(y,{color:e.currentColor,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?H("",!0):(f(),K(m,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])}var Ke=G(no,[["render",ko],["__scopeId","data-v-f63daa7a"]]);const wo=j({name:"WrapContainer",props:{showTab:C.bool.def(!1),activeKey:C.oneOf(["pure","gradient"]).def("pure")},emits:["update:activeKey","change"],setup(e,{emit:o}){const t=T({activeKey:e.activeKey}),n=ye(be),l=a=>{t.activeKey=a,o("update:activeKey",a),o("change",a)};return W(()=>e.activeKey,a=>{t.activeKey=a}),{state:t,onActiveKeyChange:l,lang:n==null?void 0:n.lang}}}),Ho={class:"vc-colorpicker"},Bo={class:"vc-colorpicker--container"},Ao={key:0,class:"vc-colorpicker--tabs"},Po={class:"vc-colorpicker--tabs__inner"},Ro={class:"vc-btn__content"},Vo={class:"vc-btn__content"};function Io(e,o,t,n,l,a){return f(),w("div",Ho,[i("div",Bo,[e.showTab?(f(),w("div",Ao,[i("div",Po,[i("div",{class:M(["vc-colorpicker--tabs__btn",{"vc-btn-active":e.state.activeKey==="pure"}]),onClick:o[0]||(o[0]=c=>e.onActiveKeyChange("pure"))},[i("button",null,[i("div",Ro,$e(e.lang==="ZH-cn"?"\u7EAF\u8272":"Pure"),1)])],2),i("div",{class:M(["vc-colorpicker--tabs__btn",{"vc-btn-active":e.state.activeKey==="gradient"}]),onClick:o[1]||(o[1]=c=>e.onActiveKeyChange("gradient"))},[i("button",null,[i("div",Vo,$e(e.lang==="ZH-cn"?"\u6E10\u53D8\u8272":"Gradient"),1)])],2),i("div",{class:"vc-colorpicker--tabs__bg",style:E({width:"50%",left:`calc(${e.state.activeKey==="gradient"?50:0}%)`})},null,4)])])):H("",!0),Fe(e.$slots,"default",{},void 0,!0)])])}var Ko=G(wo,[["render",Io],["__scopeId","data-v-4afdf3bb"]]);const Eo={isWidget:C.bool.def(!1),pickerType:C.oneOf(["fk","chrome"]).def("fk"),shape:C.oneOf(["circle","square"]).def("square"),pureColor:{type:[String,Object],default:"#000000"},gradientColor:C.string.def("#000"),format:{type:String,default:"rgb"},disableAlpha:C.bool.def(!1),disableHistory:C.bool.def(!1),roundHistory:C.bool.def(!1),useType:C.oneOf(["pure","gradient","both"]).def("pure"),activeKey:C.oneOf(["pure","gradient"]).def("pure"),lang:{type:String,default:"ZH-cn"},zIndex:C.number.def(9999)},Oo=j({name:"ColorPicker",components:{FkColorPicker:Ve,ChromeColorPicker:Ie,GradientColorPicker:Ke,WrapContainer:Ko},inheritAttrs:!1,props:Eo,emits:["update:pureColor","pureColorChange","update:gradientColor","gradientColorChange","update:activeKey","activeKeyChange"],setup(e,{emit:o}){const t=T({pureColor:e.pureColor||"",activeKey:e.useType==="gradient"?"gradient":"pure",isAdvanceMode:!1});Ge(be,{lang:O(()=>e.lang||"ZH-cn")});const n=new B(t.pureColor),l=I(n),a=new B("#000"),c=new B("#000"),r=T({startColor:a,endColor:c,startColorStop:0,endColorStop:100,angle:0,gradientColor:e.gradientColor}),u=I(!1),_=I(null),g=I(null),s=O(()=>({background:t.activeKey!=="gradient"?R(t.pureColor).toRgbString():r.gradientColor})),y=O(()=>t.activeKey==="gradient"?Ke.name:e.pickerType==="fk"?Ve.name:Ie.name),m=O(()=>t.activeKey==="gradient"?{startColor:r.startColor,endColor:r.endColor,onStartColorChange:v=>{r.startColor=v,D()},onEndColorChange:v=>{r.endColor=v,D()},angle:r.angle,startColorStop:r.startColorStop,endColorStop:r.endColorStop,onStartColorStopChange:v=>{r.startColorStop=v,D()},onEndColorStopChange:v=>{r.endColorStop=v,D()},onAngleChange:v=>{r.angle=v,D()},onAdvanceChange:v=>{t.isAdvanceMode=v}}:{disableAlpha:e.disableAlpha,disableHistory:e.disableHistory,roundHistory:e.roundHistory,color:l.value,onChange:N,onAdvanceChange:p}),p=v=>{t.isAdvanceMode=v},h=()=>{u.value=!0},S=()=>{u.value=!1},b=()=>{var v,d,$,k;try{const[A]=Ue(r.gradientColor);if(A&&A.type==="linear-gradient"&&((v=A.orientation)==null?void 0:v.type)==="angular"&&A.colorStops.length>=2){const te=A.colorStops[0],Ee=A.colorStops[1];r.startColorStop=Number((d=te.length)==null?void 0:d.value)||0,r.endColorStop=Number(($=Ee.length)==null?void 0:$.value)||0,r.angle=Number((k=A.orientation)==null?void 0:k.value)||0;const[Oe,We,Le,De]=te.value,[Me,Ne,ze,je]=te.value;r.startColor=new B({r:Number(Oe),g:Number(We),b:Number(Le),a:Number(De)}),r.startColor=new B({r:Number(Me),g:Number(Ne),b:Number(ze),a:Number(je)})}}catch(A){console.log(`[Parse Color]: ${A}`)}},D=()=>{const v=F();try{r.gradientColor=Qe(v),o("update:gradientColor",r.gradientColor),o("gradientColorChange",r.gradientColor)}catch(d){console.log(d)}},F=()=>{const v=[],d=r.startColor.RGB.map(k=>k.toString()),$=r.endColor.RGB.map(k=>k.toString());return v.push({type:"linear-gradient",orientation:{type:"angular",value:r.angle+""},colorStops:[{type:"rgba",value:[d[0],d[1],d[2],d[3]],length:{value:r.startColorStop+"",type:"%"}},{type:"rgba",value:[$[0],$[1],$[2],$[3]],length:{value:r.endColorStop+"",type:"%"}}]}),v},q=()=>{_.value&&g.value&&Ye(_.value,g.value,{placement:"auto",modifiers:[{name:"flip",options:{fallbackPlacements:["top","left"]}}]})},N=v=>{l.value=v,t.pureColor=v.toString(e.format),X()},X=()=>{o("update:pureColor",t.pureColor),o("pureColorChange",t.pureColor)};Xe(g,()=>{S()});const z=v=>{t.activeKey=v,o("update:activeKey",v),o("activeKeyChange",v)};return Y(()=>{q(),X(),b(),D()}),W(()=>e.gradientColor,v=>{v!=r.gradientColor&&(r.gradientColor=v)}),W(()=>r.gradientColor,()=>{b()}),W(()=>e.activeKey,v=>{t.activeKey=v}),W(()=>e.useType,v=>{t.activeKey!=="gradient"&&v==="gradient"?t.activeKey="gradient":t.activeKey="pure"}),W(()=>e.pureColor,v=>{R.equals(v,t.pureColor)||(t.pureColor=v,l.value=new B(v),X())},{deep:!0}),{colorCubeRef:_,pickerRef:g,showPicker:u,colorInstance:l,getBgColorStyle:s,onColorChange:N,onShowPicker:h,onActiveKeyChange:z,getComponentName:y,getBindArgs:m,state:t}}});function Wo(e,o,t,n,l,a){const c=P("WrapContainer");return f(),w(x,null,[e.isWidget?H("",!0):(f(),w("div",{key:0,class:M(["vc-color-wrap","transparent",{round:e.shape==="circle"}]),ref:"colorCubeRef"},[i("div",{class:"current-color",style:E(e.getBgColorStyle),onClick:o[0]||(o[0]=(...r)=>e.onShowPicker&&e.onShowPicker(...r))},null,4)],2)),e.isWidget?(f(),K(c,{key:1,"active-key":e.state.activeKey,"onUpdate:active-key":o[1]||(o[1]=r=>e.state.activeKey=r),"show-tab":e.useType==="both",onChange:e.onActiveKeyChange,style:E({zIndex:e.zIndex})},{default:ke(()=>[(f(),K(we(e.getComponentName),He({key:e.getComponentName},e.getBindArgs),null,16))]),_:1},8,["active-key","show-tab","onChange","style"])):H("",!0),e.isWidget?H("",!0):(f(),K(qe,{key:2,to:"body"},[me(i("div",{ref:"pickerRef",style:E({zIndex:e.zIndex})},[e.showPicker?(f(),K(c,{key:0,"show-tab":e.useType==="both"&&!e.state.isAdvanceMode,"active-key":e.state.activeKey,"onUpdate:active-key":o[2]||(o[2]=r=>e.state.activeKey=r),onChange:e.onActiveKeyChange},{default:ke(()=>[(f(),K(we(e.getComponentName),He({key:e.getComponentName},e.getBindArgs),null,16))]),_:1},8,["show-tab","active-key","onChange"])):H("",!0)],4),[[Se,e.showPicker]])]))],64)}var qo=G(Oo,[["render",Wo],["__scopeId","data-v-0aa3a75d"]]);export{qo as C};
